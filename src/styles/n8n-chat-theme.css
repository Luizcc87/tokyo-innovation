/* Tokyo Innovation - n8n Chat Theme */
/* Brand: Dark premium B2B with tech accents */
/* Toggle: WhatsApp green style */

:root {
  /* Core colors */
  --chat--color--primary: #4FC3F7;
  --chat--color--primary-shade-50: #3BA8D8;
  --chat--color--primary-shade-100: #2B7AB8;
  --chat--color--secondary: #2B7AB8;
  --chat--color--secondary-shade-50: #1B5A8A;
  --chat--color--white: #FFFFFF;
  --chat--color--light: #EAF2F7;
  --chat--color--light-shade-50: #8BA3B9;
  --chat--color--medium: #1B3A4A;
  --chat--color--dark: #000000;
  --chat--color--disabled: #3A5568;
  --chat--color--typing: #4FC3F7;

  /* Spacing */
  --chat--spacing: 1rem;
  --chat--border-radius: 16px;
  --chat--transition-duration: 0.2s;

  /* Window sizing */
  --chat--window--width: 420px;
  --chat--window--height: 620px;

  /* Header */
  --chat--header--background: linear-gradient(135deg, #0A1628 0%, #000000 100%);
  --chat--header--color: #FFFFFF;
  --chat--header--padding: 1.25rem;
  --chat--header--border-bottom: 1px solid #1B3A4A;

  /* Toggle button - WhatsApp green style */
  --chat--toggle--background: #25D366;
  --chat--toggle--hover--background: #1EBE5D;
  --chat--toggle--active--background: #1AAE54;
  --chat--toggle--color: #FFFFFF;
  --chat--toggle--size: 56px;

  /* Message textarea */
  --chat--textarea--height: 50px;

  /* Bot message */
  --chat--message--bot--background: #0A1628;
  --chat--message--bot--color: #EAF2F7;
  --chat--message--bot--border: 1px solid #1B3A4A;

  /* User message */
  --chat--message--user--background: #38E08F;
  --chat--message--user--color: #000000;
  --chat--message--user--border: none;

  /* Body/container */
  --chat--body--background: #000000;

  /* Input */
  --chat--input--background: #0A1628;
  --chat--input--border: 1px solid #1B3A4A;
  --chat--input--color: #FFFFFF;
  --chat--input--placeholder: #8BA3B9;

  /* Footer */
  --chat--footer--background: #000000;
  --chat--footer--border-top: 1px solid #1B3A4A;
}

/* Chat container positioning */
.n8n-chat {
  --chat--toggle--position--bottom: 24px;
  --chat--toggle--position--right: 24px;
  z-index: 9999 !important;
}

/* Pulse animation for toggle button */
@keyframes chat-pulse {
  0%, 100% {
    box-shadow: 
      0 4px 12px rgba(37, 211, 102, 0.4),
      0 0 20px rgba(37, 211, 102, 0.2);
  }
  50% {
    box-shadow: 
      0 4px 20px rgba(37, 211, 102, 0.6),
      0 0 40px rgba(37, 211, 102, 0.4);
  }
}

/* Toggle button styling - WhatsApp green with pulse */
.n8n-chat .chat-toggle {
  background: #25D366 !important;
  border: none !important;
  box-shadow: 
    0 4px 12px rgba(37, 211, 102, 0.4),
    0 0 20px rgba(37, 211, 102, 0.2) !important;
  transition: all 0.3s ease !important;
  animation: chat-pulse 2s ease-in-out infinite;
}

.n8n-chat .chat-toggle:hover {
  background: #1EBE5D !important;
  box-shadow: 
    0 6px 20px rgba(37, 211, 102, 0.5),
    0 0 30px rgba(37, 211, 102, 0.3) !important;
  transform: scale(1.08);
  animation: none; /* Stop pulse on hover */
}

.n8n-chat .chat-toggle:active {
  background: #1AAE54 !important;
  transform: scale(1.02);
}

.n8n-chat .chat-toggle svg {
  color: #FFFFFF !important;
}

/* Window container */
.n8n-chat .chat-window {
  background: var(--chat--body--background) !important;
  border: 1px solid #1B3A4A !important;
  border-radius: var(--chat--border-radius) !important;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.5), 0 0 0 1px rgba(79, 195, 247, 0.1) !important;
  overflow: hidden;
}

/* Header styling */
.n8n-chat .chat-header {
  background: var(--chat--header--background) !important;
  border-bottom: var(--chat--header--border-bottom) !important;
  padding: var(--chat--header--padding) !important;
}

.n8n-chat .chat-header h1,
.n8n-chat .chat-header .chat-heading {
  color: #FFFFFF !important;
  font-family: 'Sora', sans-serif !important;
  font-weight: 600 !important;
}

.n8n-chat .chat-header p,
.n8n-chat .chat-header .chat-subtitle {
  color: #8BA3B9 !important;
}

/* Messages area */
.n8n-chat .chat-messages-list {
  background: var(--chat--body--background) !important;
}

/* Bot messages */
.n8n-chat .chat-message.chat-message-from-bot .chat-message-body {
  background: var(--chat--message--bot--background) !important;
  color: var(--chat--message--bot--color) !important;
  border: var(--chat--message--bot--border) !important;
  border-radius: 12px 12px 12px 4px !important;
}

/* User messages */
.n8n-chat .chat-message.chat-message-from-user .chat-message-body {
  background: var(--chat--message--user--background) !important;
  color: var(--chat--message--user--color) !important;
  border-radius: 12px 12px 4px 12px !important;
  font-weight: 500 !important;
}

/* Input area */
.n8n-chat .chat-input {
  background: var(--chat--footer--background) !important;
  border-top: var(--chat--footer--border-top) !important;
  padding: 1rem !important;
}

.n8n-chat .chat-input textarea {
  background: var(--chat--input--background) !important;
  border: var(--chat--input--border) !important;
  color: var(--chat--input--color) !important;
  border-radius: 12px !important;
  padding: 0.75rem 1rem !important;
}

.n8n-chat .chat-input textarea::placeholder {
  color: var(--chat--input--placeholder) !important;
}

.n8n-chat .chat-input textarea:focus {
  border-color: #4FC3F7 !important;
  outline: none !important;
  box-shadow: 0 0 0 2px rgba(79, 195, 247, 0.2) !important;
}

/* Send button - comprehensive selectors */
.n8n-chat .chat-input button,
.n8n-chat .chat-input button[type="submit"],
.n8n-chat [class*="composer"] button,
.n8n-chat [class*="input"] button,
.n8n-chat form button[type="submit"],
.n8n-chat button[class*="send"] {
  background: linear-gradient(135deg, #4FC3F7 0%, #2B7AB8 100%) !important;
  color: #FFFFFF !important;
  border: none !important;
  border-radius: 10px !important;
  min-width: 44px !important;
  min-height: 44px !important;
  padding: 10px !important;
  cursor: pointer !important;
  display: flex !important;
  align-items: center !important;
  justify-content: center !important;
  transition: all 0.2s ease !important;
}

.n8n-chat .chat-input button:hover,
.n8n-chat .chat-input button[type="submit"]:hover,
.n8n-chat [class*="composer"] button:hover,
.n8n-chat form button[type="submit"]:hover {
  background: linear-gradient(135deg, #38E08F 0%, #2BC975 100%) !important;
  transform: scale(1.05);
  box-shadow: 0 4px 12px rgba(79, 195, 247, 0.3) !important;
}

.n8n-chat .chat-input button:disabled,
.n8n-chat .chat-input button[type="submit"]:disabled,
.n8n-chat [class*="composer"] button:disabled {
  background: #1B3A4A !important;
  color: #8BA3B9 !important;
  cursor: not-allowed !important;
  transform: none !important;
  box-shadow: none !important;
}

/* Send button icon - ensure visibility */
.n8n-chat .chat-input button svg,
.n8n-chat .chat-input button[type="submit"] svg,
.n8n-chat [class*="composer"] button svg,
.n8n-chat form button[type="submit"] svg,
.n8n-chat button[class*="send"] svg {
  width: 20px !important;
  height: 20px !important;
  color: #FFFFFF !important;
  fill: currentColor !important;
  stroke: currentColor !important;
}

/* Send button icon path (for SVG icons) */
.n8n-chat .chat-input button svg path,
.n8n-chat [class*="composer"] button svg path {
  fill: #FFFFFF !important;
  stroke: #FFFFFF !important;
}

/* Welcome screen */
.n8n-chat .chat-welcome-screen {
  background: var(--chat--body--background) !important;
}

.n8n-chat .chat-welcome-screen h1 {
  color: #FFFFFF !important;
  font-family: 'Sora', sans-serif !important;
}

.n8n-chat .chat-welcome-screen p {
  color: #8BA3B9 !important;
}

.n8n-chat .chat-welcome-screen button {
  background: linear-gradient(135deg, #4FC3F7 0%, #2B7AB8 100%) !important;
  color: #000000 !important;
  font-weight: 600 !important;
  border-radius: 12px !important;
  transition: all 0.2s ease !important;
}

.n8n-chat .chat-welcome-screen button:hover {
  transform: translateY(-2px);
  box-shadow: 0 4px 16px rgba(79, 195, 247, 0.3) !important;
}

/* Close button */
.n8n-chat .chat-close-button {
  color: #8BA3B9 !important;
  transition: color 0.2s ease !important;
}

.n8n-chat .chat-close-button:hover {
  color: #FFFFFF !important;
}

/* Typing indicator - animated dots */
@keyframes typing-bounce {
  0%, 60%, 100% {
    transform: translateY(0);
    opacity: 0.4;
  }
  30% {
    transform: translateY(-8px);
    opacity: 1;
  }
}

@keyframes typing-pulse {
  0%, 100% {
    box-shadow: 0 0 0 0 rgba(79, 195, 247, 0.4);
  }
  50% {
    box-shadow: 0 0 8px 2px rgba(79, 195, 247, 0.6);
  }
}

.n8n-chat .chat-typing-indicator,
.n8n-chat [class*="typing"],
.n8n-chat [class*="loading"] {
  display: flex !important;
  align-items: center !important;
  gap: 6px !important;
  padding: 12px 16px !important;
  background: #0A1628 !important;
  border: 1px solid #1B3A4A !important;
  border-radius: 12px 12px 12px 4px !important;
  margin: 8px 0 !important;
}

.n8n-chat .chat-typing-indicator span,
.n8n-chat [class*="typing"] span,
.n8n-chat [class*="typing"] div {
  width: 10px !important;
  height: 10px !important;
  background: linear-gradient(135deg, #4FC3F7 0%, #2B7AB8 100%) !important;
  border-radius: 50% !important;
  animation: typing-bounce 1.4s ease-in-out infinite, typing-pulse 1.4s ease-in-out infinite !important;
}

.n8n-chat .chat-typing-indicator span:nth-child(1),
.n8n-chat [class*="typing"] span:nth-child(1),
.n8n-chat [class*="typing"] div:nth-child(1) {
  animation-delay: 0s !important;
}

.n8n-chat .chat-typing-indicator span:nth-child(2),
.n8n-chat [class*="typing"] span:nth-child(2),
.n8n-chat [class*="typing"] div:nth-child(2) {
  animation-delay: 0.2s !important;
}

.n8n-chat .chat-typing-indicator span:nth-child(3),
.n8n-chat [class*="typing"] span:nth-child(3),
.n8n-chat [class*="typing"] div:nth-child(3) {
  animation-delay: 0.4s !important;
}

/* ============================================= */
/* HIDE "Powered by n8n" - SAFE selectors only  */
/* DO NOT use [class*="footer"] - it hides input */
/* ============================================= */
.n8n-chat a[href*="n8n"],
.n8n-chat a[href*="n8n.io"],
.n8n-chat [class*="powered"],
.n8n-chat [class*="powered-by"],
.n8n-chat [class*="Powered"],
.n8n-chat [class*="attribution"],
.n8n-chat [class*="branding"] {
  display: none !important;
  visibility: hidden !important;
  opacity: 0 !important;
  height: 0 !important;
  overflow: hidden !important;
  pointer-events: none !important;
}

/* ============================================= */
/* GUARANTEE input/composer is visible          */
/* ============================================= */
.n8n-chat textarea,
.n8n-chat form,
.n8n-chat [class*="composer"],
.n8n-chat [class*="input"],
.n8n-chat [class*="textarea"],
.n8n-chat .chat-input {
  display: block !important;
  visibility: visible !important;
  opacity: 1 !important;
}

.n8n-chat textarea {
  min-height: 52px !important;
}

/* Scrollbar styling */
.n8n-chat .chat-messages-list::-webkit-scrollbar {
  width: 6px;
}

.n8n-chat .chat-messages-list::-webkit-scrollbar-track {
  background: #0A1628;
}

.n8n-chat .chat-messages-list::-webkit-scrollbar-thumb {
  background: #1B3A4A;
  border-radius: 3px;
}

.n8n-chat .chat-messages-list::-webkit-scrollbar-thumb:hover {
  background: #2B7AB8;
}

/* Mobile responsive */
@media (max-width: 768px) {
  .n8n-chat {
    --chat--window--width: 92vw;
    --chat--window--height: 70vh;
    --chat--toggle--position--bottom: 16px;
    --chat--toggle--position--right: 16px;
  }

  .n8n-chat .chat-window {
    max-width: 92vw !important;
    max-height: 70vh !important;
    right: 4vw !important;
    bottom: 80px !important;
  }

  .n8n-chat .chat-toggle {
    width: 52px !important;
    height: 52px !important;
  }
}

/* Reduced motion preference */
@media (prefers-reduced-motion: reduce) {
  .n8n-chat,
  .n8n-chat * {
    transition: none !important;
    animation: none !important;
  }
  
  .n8n-chat .chat-toggle:hover {
    transform: none !important;
  }
  
  .n8n-chat .chat-input button:hover {
    transform: none !important;
  }
  
  .n8n-chat .chat-welcome-screen button:hover {
    transform: none !important;
  }
}
